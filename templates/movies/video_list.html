{% extends "base.html" %}

{% block content %}
  <h1>Videos</h1>

  <p style="margin: 0.5rem 0 1rem;">
    <a class="btn" href="{% url 'video_create' %}">+ Add Video</a>
  </p>

  <style>
    .tbl { width:100%; border-collapse:collapse; }
    .tbl th, .tbl td { text-align:left; padding:8px; border-bottom:1px solid #eee; }
    .muted { color:#888; }
    .placeholder { opacity: .8; }
    .badge { display:inline-block; padding:2px 6px; border-radius:4px; background:#eee; font-size:12px; }
  </style>

  <table class="tbl">
    <thead>
      <tr>
        <th>Title</th>
        <th>Year</th>
        <th>Genre</th>
        <th>Director</th>
        <th>Actor 1</th>
        <th>Actor 2</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>

      {# ---- PLACEHOLDERS when DB isn't ready ---- #}
      {% if pending_migrations %}
        <tr class="placeholder">
          <td>Sample Movie A</td>
          <td>1999</td>
          <td>Sci-Fi</td>
          <td>John Doe</td>
          <td>Actor Alpha</td>
          <td>Actor Beta</td>
          <td><span class="muted">Edit</span> | <span class="muted">Delete</span></td>
        </tr>
        <tr class="placeholder">
          <td>Sample Movie B</td>
          <td>2008</td>
          <td>Drama</td>
          <td>Jane Smith</td>
          <td>Actor Gamma</td>
          <td>Actor Delta</td>
          <td><span class="muted">Edit</span> | <span class="muted">Delete</span></td>
        </tr>
        <tr class="placeholder">
          <td>Sample Movie C</td>
          <td>2014</td>
          <td>Action</td>
          <td>Chris Lee</td>
          <td>Actor Epsilon</td>
          <td>Actor Zeta</td>
          <td><span class="muted">Edit</span> | <span class="muted">Delete</span></td>
        </tr>
        <tr>
          <td colspan="7" class="muted">
            <span class="badge">Placeholder data</span>
            Real entries will appear automatically once the database initializes.
          </td>
        </tr>

      {# ---- REAL DATA when DB is ready ---- #}
      {% elif videos %}
        {% for video in videos %}
          <tr>
            <td>
              <a href="{% url 'video_detail' video.pk %}">{{ video.movie_title|default:"—" }}</a>
            </td>
            <td>{{ video.release_year|default:"—" }}</td>
            <td>{{ video.movie_genre|default:"—" }}</td>
            <td>{{ video.director_name|default:"—" }}</td>
            <td>{{ video.actor1_name|default:"—" }}</td>
            <td>{{ video.actor2_name|default:"—" }}</td>
            <td>
              <a href="{% url 'video_update' video.pk %}">Edit</a> |
              <a href="{% url 'video_delete' video.pk %}">Delete</a>
            </td>
          </tr>
        {% endfor %}

      {# ---- EMPTY STATE if DB ready but no rows ---- #}
      {% else %}
        <tr>
          <td colspan="7" class="muted">
            No videos yet. <a href="{% url 'video_create' %}">Add one</a>.
          </td>
        </tr>
      {% endif %}

    </tbody>
  </table>
{% endblock %}
